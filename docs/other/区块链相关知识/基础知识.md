# 1. 区块链基础知识

## 1.1. 比特币 私匙 公匙 地址
``` 
私匙:
又称为钱包导入格式：WIF（Wallet Import Format）
使用非压缩格式的WIF是以5开头的字符串。
使用压缩格式的WIF是以K或L开头的字符串

公匙:
以1开头的地址
公匙是根据私匙由ECDSA算法推算出来的

地址:
而是公钥的哈希，即从公钥能推导出地址，但从地址不能反推公钥.
公匙经过hash160, 也就是先计算SHA-256，再计算RipeMD160得到地址
```

## 1.2. 比特币交易本质和流程
```
比特币交易的输出是一个锁定脚本，而下一个交易的输入是一个解锁脚本。必须提供一个解锁脚本，让锁定脚本正确运行，那么该输入有效，就可以花费该输出。
当小明给小红支付一笔比特币时，实际上小明创建了一个锁定脚本，该锁定脚本中引入了小红的地址。要想通过解锁脚本花费该输出，只有持有对应私钥的小红才能创建正确的解锁脚本（因为解锁脚本包含的签名只有小红的私钥才能创建），因此，小红事实上拥有了花费该输出的权利


解锁脚本(某账号的输入): 48 (30450221...68fa9b01[这个为消息的签名]) 21 (03dd8763...14cf740f[这个为公匙])
锁定脚本(某账号的输出 包含该输出要到的地址): 76 a9 14 (dc5dc65c...fe9f489c[这个为输出到账号的地址]) 88 ac
          DATA 48 (30450221...68fa9b01) [这个为消息的签名]
          DATA 21 (03dd8763...14cf740f) [这个为公匙]
        OP_DUP 76 [复制堆栈最上面的数据]
    OP_HASH160 a9 [进行hash160计算,也就是通过公匙计算地址]
          DATA 14 (dc5dc65c...fe9f489c)  [地址数据]
OP_EQUALVERIFY 88 [比较堆栈上面的2个数据是否相等]
   OP_CHECKSIG ac [验证签名消息]
```
## 1.3. 比特币多重签名
```
多重签名地址实际上是一个Script Hash
多重地址是以3开头的
发送给多重签名地址的交易创建的是P2SH脚本
而花费多重签名地址的资金需要的脚本就是M个签名+Redeem Script。

Redeem Script 包含了所有人的公钥，以及正确的M-N数值

多重签名可以实现N个人持有私钥，其中M个人同意即可花费资金的功能。

支付比特币到一个多重签名地址实际上是创建一个P2SH输出。
```


## 1.4. Segwit 隔离见证地址
```
bc开头
3开头的为隔离见证兼容地址 Nested Segwit Address
```

## 1.5. HD钱包
```
只需要管理一个根私钥，即可实时计算所有“子私钥”的管理方式，称为HD钱包。

xprv: 扩展私钥
是一个扩展的512位私钥，记作xprv，它通过SHA-512算法配合ECC计算出子扩展私钥，仍然是512位。通过扩展私钥可计算出用于签名的私钥以及公钥。

HD钱包采用分层确定性算法通过根扩展私钥计算所有层级的所有子扩展私钥，继而得到扩展公钥和地址；
可以通过普通衍生和硬化衍生两种方式计算扩展子私钥，后者更安全，但对应的扩展公钥无法计算硬化衍生的子
通过扩展公钥可以在没有扩展私钥的前提下计算所有普通子扩展公钥，此特性可实现观察钱包。

使用助记词+口令来生成HD钱包的种子，用户只需记忆助记词和口令即可随时恢复HD钱包。
```


问题:
同一时间有2个矿工找到了一个区块, 然后分叉了, 后续又因为最长工时算法, 有一个区块被废弃了, 那么被废弃了的区块上的交易记录去哪了. 那第一个挖到那个区域的矿工的奖励还会有吗?


## 1.6. MPT
```
叶子节点: 是一个键值对(key, value) key是原始内容的一种
```

## 1.7. 合约
### 1.7.1. ERC20 代币
```
1. ERC20代币: 可替代性代币的标准, 不同单元之间可以相互交换
2. 发行量可以是固定的也可以调整修改
```
### 1.7.2. ERC777
```
针对ERC20改进的代币合约
```
### 1.7.3. ERC721
```
不可替代物(实物契约)的代币标准
```

## 1.8. gas, gas price, gas limit
```
gas 为一个交易中以太坊虚拟机的实际运算步数
gas price 为你愿意为一个单位的gas出的Eth  1Gwei = 10^-9eth = 0.000000001eth
实际交易手续费 = gas(实际运行步数) * gasprice(单位价格)
```

## 1.9. 货币单位
```
1 ether = 10^18wei
1 gwei = 10^9wei
```

